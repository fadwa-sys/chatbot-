<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeacherVirtuel - Trinity AI</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        header { background: #2563eb; color: white; padding: 15px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 80%; padding: 12px; border-radius: 15px; line-height: 1.4; }
        .user { align-self: flex-end; background: #2563eb; color: white; }
        .bot { align-self: flex-start; background: white; border: 1px solid #ddd; color: #333; }
        .input-area { background: white; padding: 20px; display: flex; gap: 10px; border-top: 1px solid #ddd; }
        input { flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 25px; outline: none; }
        button { background: #2563eb; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: bold; }
        button:disabled { background: #ccc; }
    </style>
</head>
<body>

<header>
    <h1>ðŸŽ“ TeacherVirtuel</h1>
    <small>ModÃ¨le: Trinity-Large-Preview</small>
</header>

<div id="chat-box">
    <div class="msg bot">Bonjour ! Je suis votre TeacherVirtuel. Posez-moi votre question.</div>
</div>

<div class="input-area">
    <input type="text" id="userInput" placeholder="Ã‰crivez ici..." onkeypress="if(event.key==='Enter') sendMessage()">
    <button id="sendBtn" onclick="sendMessage()">ENVOYER</button>
</div>

<script>
    // Utilisation de votre clÃ© API fournie
    const KEY = "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";
    const MOD = "arcee-ai/trinity-large-preview:free";

    async function sendMessage() {
        const input = document.getElementById('userInput');
        const btn = document.getElementById('sendBtn');
        const chatBox = document.getElementById('chat-box');
        const text = input.value.trim();

        if (!text) return;

        // 1. Afficher le message utilisateur immÃ©diatement
        const userDiv = document.createElement('div');
        userDiv.className = 'msg user';
        userDiv.innerText = text;
        chatBox.appendChild(userDiv);
        
        input.value = "";
        btn.disabled = true;
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            // 2. RequÃªte vers OpenRouter
            const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Authorization": `Bearer ${KEY}`,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    "model": MOD,
                    "messages": [
                        {"role": "system", "content": "Tu es un professeur virtuel pÃ©dagogue."},
                        {"role": "user", "content": text}
                    ]
                })
            });

            const data = await
